<!DOCTYPE html>
<html lang="en" xmlns:th="htttp://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <title>Lista de movimientos</title>
  <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.1.0/css/bootstrap.min.css}" >
  <link rel="stylesheet" th:href="@{/webjars/font-awesome/6.0.0/css/all.min.css}">
  <link rel="stylesheet" th:href="@{/css/css-footer.css}">
</head>
<body>
<header th:replace="layout/plantilla :: header"></header>
<section th:replace="layout/plantilla :: mainTransacciones"></section>
<br>
<section>
  <div class="container">
    <div class="card">
      <h4 class="card-title" th:text="'Movimientos de ' + ${empresaObj.nombreEmpresa}"></h4>
      <div class="card-body">
        <div th:if="${transaccionesXEmpresa != null and !transaccionesXEmpresa.empty}">
          <table class="table table-dark table-striped table-hover">
            <thead>
            <tr>
              <th scope="col">No.</th>
              <th scope="col">Monto</th>
              <th scope="col">Concepto</th>
              <th scope="col">Empleado</th>
              <th sec:authorize="hasRole('ROLE_ADMIN')" scope="col">Editar</th>
              <th sec:authorize="hasRole('ROLE_ADMIN')" scope="col">Eliminar</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="movimientoDinero, contador: ${transaccionesXEmpresa}" th:if="${movimientoDinero.estado}">
              <td th:text="${contador.count}"></td>
              <td th:text="${movimientoDinero.montoTransaccion}"></td>
              <td th:text="${movimientoDinero.concepto}"></td>
              <td th:text="${movimientoDinero.empleado.nombreEmpleado}"></td>
              <td sec:authorize="hasRole('ROLE_ADMIN')"><a th:href="@{/editarTransaccion/}+${movimientoDinero.id}" class="btn btn-secondary" >
                <i class="fa fa-edit"></i>
              </a></td>
              <td sec:authorize="hasRole('ROLE_ADMIN')"><a th:href="@{/eliminarTransaccion/}+${movimientoDinero.id}" class="btn btn-secondary" >
                <i class="fa fa-remove"></i>
              </a></td>
            </tr>
          </table>
        </div>
        <div th:if="${transaccionesXEmpresa == null or transaccionesXEmpresa.empty}">
          <span>No hay movimientos registrados</span>
        </div>
      </div>
      <div class="container">
        <h4 th:text="'Balance movimientos: '+${total}"></h4>
      </div>
      <div class="card-footer">
        <a class="btn btn-dark" th:href="@{/transacciones/list}">Regresar</a>
      </div>
    </div>
  </div>
</section>
<!--
<section sec:authorize="hasRole('ROLE_ADMIN')">
  <div class="container">
    <div class="row">
      <div class="col-md-4">
        <a th:href="@{/transacciones/modificar}" class="btn btn-dark btn-block">
          <i class="fas fa-plus"></i>
          <span>Agregar Movimiento</span>
        </a>
      </div>
    </div>
  </div>
</section>
-->
<br>
<footer th:replace="layout/plantilla :: footer"></footer>
<script th:src="@{/webjars/bootstrap/5.1.0/js/bootstrap.bundle.min.js}"></script>
<script th:src="@{/webjars/popper/js/2.9.3/umd/popper.min.js}"></script>
</body>
</html>